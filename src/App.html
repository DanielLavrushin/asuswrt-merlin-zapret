<!DOCTYPE html>
<html lang="en">
  <head>
    <!--page:zapretui-->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <link rel="shortcut icon" href="images/favicon.png" />
    <link rel="icon" href="images/favicon.png" />
    <title>Zapret UI</title>
    <link rel="stylesheet" type="text/css" href="index_style.css" />
    <link rel="stylesheet" type="text/css" href="form_style.css" />
    <link rel="stylesheet" type="text/css" href="/js/table/table.css" />

    <script language="JavaScript" type="text/javascript" src="/js/jquery.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/httpApi.js"></script>
    <script language="JavaScript" type="text/javascript" src="/state.js"></script>
    <script language="JavaScript" type="text/javascript" src="/general.js"></script>
    <script language="JavaScript" type="text/javascript" src="/popup.js"></script>
    <script language="JavaScript" type="text/javascript" src="/help.js"></script>
    <script language="JavaScript" type="text/javascript" src="/validator.js"></script>
    <script>
      var zapretui = {
        language: '<% nvram_get("preferred_lang"); %>',
        tpws: parseInt('<% sysinfo("pid.tpws"); %>') > 0,
        nfqws: parseInt('<% sysinfo("pid.nfqws"); %>') > 0
      };
      let custom_settings = `<% get_custom_settings(); %>`;

      try {
        zapretui.custom_settings = JSON.parse(custom_settings);
      } catch (e) {
        if (custom_settings.indexOf('zapret_payload') !== -1) {
          console.error('Invalid custom settings: zapret_payload detected.');
        }
      }
    </script>
  </head>

  <body>
    <div id="vue-app"></div>
    <div id="vue-modals"></div>
    <script src="/ext/zapretui/app.js" type="module"></script>
  </body>
</html>
